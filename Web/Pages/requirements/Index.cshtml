@page
@model Web.Pages.requirements.IndexModel
@{
    ViewBag.Title = "{requirements}";
}

@section head {
    <link href="../style/site.css" rel="stylesheet" />
}

<h1>@ViewBag.Title</h1>
<ul>
    @foreach (var category in Model.Requirements.SelectMany(x => x.Categories).Distinct())
    {
        <li>
            <fieldset>
                <legend>@category.Number - <a href="../requirement-category/@category.Number">@category.Title</a></legend>
                <ul>
                    @foreach (var requirement in Model.Requirements.Where(x => x.Categories.Contains(category)))
                    {
                        <li><a href="../requirement/@requirement.Number">@requirement.Number - @requirement.Title</a></li>
                    }
                </ul>
            </fieldset>
        </li>
    }
    <li>
        <fieldset>
            <legend>Uncategorised</legend>
            <ul>
                @foreach (var requirement in Model.Requirements.Where(x => !x.Categories.Any()))
                {
                    <li><a href="../requirement/@requirement.Number">@requirement.Number - @requirement.Title</a></li>
                }
            </ul>
        </fieldset>
    </li>
</ul>
